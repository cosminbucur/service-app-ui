<button mat-raised-button (click)="isLinear = !isLinear" id="toggle-linear">
  {{!isLinear ? 'Enable linear mode' : 'Disable linear mode'}}
</button>
<mat-horizontal-stepper [linear]="isLinear" #stepper>

  <!-- step 1 -->
  <mat-step [stepControl]="customerDetailsFormGroup">

    <form [formGroup]="customerDetailsFormGroup" novalidate autocomplete="off">
      <ng-template matStepLabel>Customer</ng-template>

      <app-customer-search></app-customer-search>

      <button mat-mini-fab color="primary" matTooltip="Add customer" (click)="openDialog()">
        <mat-icon>add</mat-icon>
      </button>

      <!-- first name -->
      <mat-form-field>
        <mat-label>First Name</mat-label>
        <input matInput placeholder="ex: Eminescu" formControlName="firstName" required>
      </mat-form-field>

      <!-- last name -->
      <mat-form-field>
        <mat-label>Last Name</mat-label>
        <input matInput placeholder="ex: Mihai" formControlName="lastName" required>
      </mat-form-field>

      <!-- company -->
      <mat-form-field>
        <mat-label>Company</mat-label>
        <input matInput placeholder="ex: Premium Anvelope" formControlName="company" required>
      </mat-form-field>
    </form>

    <!-- TODO remove this in production -->
    <!-- <pre>{{ customerDetailsFormGroup.value | json }}</pre> -->

    <form [formGroup]="customerDetailsFormGroup">
      <!-- phone number -->
      <mat-form-field>
        <mat-label>Phone Number</mat-label>
        <input matInput placeholder="ex: 0723456789" formControlName="phoneNumber" required>
      </mat-form-field>

      <!-- email -->
      <mat-form-field>
        <mat-label>E-mail</mat-label>
        <input matInput placeholder="ex: alex@gmail.com" formControlName="email" required>
      </mat-form-field>

      <!-- license plate -->
      <mat-form-field>
        <mat-label>License Plate</mat-label>
        <input matInput placeholder="ex: B001BOS" formControlName="licensePlate" required>
      </mat-form-field>

      <div>
        <button mat-button matStepperNext>NEXT</button>
      </div>
    </form>
  </mat-step>

  <!-- step 2 -->
  <mat-step [stepControl]="serviceDetailsFormGroup">
    <form [formGroup]="serviceDetailsFormGroup">
      <ng-template matStepLabel>Service</ng-template>

      <!-- mechanic name -->
      <mat-form-field>
        <mat-label>Mechanic Name</mat-label>
        <input matInput formControlName="mechanicName" placeholder="ex: Alex" required>
      </mat-form-field>

      <app-mechanic-search></app-mechanic-search>

      <!-- services performed -->
      <mat-form-field>
        <mat-label>Services Performed</mat-label>
        <input matInput formControlName="servicesPerformed" placeholder="ex: complete 15inch" required>
      </mat-form-field>

      <!-- observations -->
      <mat-form-field class="service-details-comment-box">
        <mat-label>Observations</mat-label>
        <textarea matInput formControlName="observations" placeholder="ex: tyres require changing soon"></textarea>
      </mat-form-field>

      <div>
        <button mat-button matStepperPrevious>BACK</button>
        <button mat-button matStepperNext>NEXT</button>
      </div>
    </form>
  </mat-step>

  <!-- step 3 -->
  <mat-step [stepControl]="tyreDetailsFormGroup">

    <form [formGroup]="tyreDetailsFormGroup">
      <ng-template matStepLabel>Tyres</ng-template>

      <app-step-tyres></app-step-tyres>

    </form>
  </mat-step>

  <!-- step 4 -->
  <mat-step [stepControl]="tyreDetailsFormGroup">
    <mat-card>

      <form [formGroup]="tyreDetailsFormGroup">
        <ng-template matStepLabel>Summary</ng-template>
  
        <div class=container>
          <div>
            <!-- client details -->
            <div>
              <mat-card>
                <mat-card-subtitle>Client details</mat-card-subtitle>
                <div>
                  <label>Full Name: {{ customerDetailsFormGroup.value.firstName }}
                    {{ customerDetailsFormGroup.value.lastName }}
                  </label>
                </div>
                <div>
                  <label>Company: {{ customerDetailsFormGroup.value.company }} </label>
                </div>
                <div>
                  <label>Phone Number: {{ customerDetailsFormGroup.value.phoneNumber }} </label>
                </div>
                <div>
                  <label>Email: {{ customerDetailsFormGroup.value.email }}</label>
                </div>
                <div>
                  <label>License Plate: {{ customerDetailsFormGroup.value.licensePlate }}</label>
                </div>
              </mat-card>
            </div>
  
            <!-- service details -->
            <div>
              <mat-card>
                <mat-card-subtitle>Service</mat-card-subtitle>
                <div>
                  <label>Date: {{ visit.visitDate | date }}</label>
                </div>
                <div>
                  <label>Mechanic: {{ serviceDetailsFormGroup.value.mechanicName}}</label>
                </div>
                <div>
                  <label>Services: {{ serviceDetailsFormGroup.value.servicesPerformed}}</label>
                </div>
                <div>
                  <label>Observations: {{ serviceDetailsFormGroup.value.observations }}</label>
                </div>
              </mat-card>
            </div>
          </div>
  
          <div>
            <!-- mounted tyres -->
            <div>
              <mat-card>
                <mat-card-subtitle>Mounted Tyres</mat-card-subtitle>
                <div>
                  <label>Size: 
                    {{ tyreDetailsFormGroup.value.mountedWidth }}/
                    {{ tyreDetailsFormGroup.value.mountedHeight }} R
                    {{ tyreDetailsFormGroup.value.mountedRimDiameter }}
                  </label>
                </div>
                <div>
                  <label>Brand: {{ tyreDetailsFormGroup.value.mountedBrand }}</label>
                </div>
                <div>
                  Season: {{ mountedSeason }}
                </div>
              </mat-card>
            </div>
  
            <!-- hotel tyres -->
            <div>
              <mat-card>
                <mat-card-subtitle>Hotel Tyres</mat-card-subtitle>
                <div>
                  <label>Size: {{tyreDetailsFormGroup.value.hotelWidth}}/
                    {{tyreDetailsFormGroup.value.hotelHeight}} R{{ tyreDetailsFormGroup.value.hotelRimDiameter }} </label>
                </div>
                <div>
                  <label>Brand: {{ tyreDetailsFormGroup.value.hotelBrand }}</label>
                </div>
                <div>
                  <label>Season: {{ hotelSeason }}</label>
                </div>
                <div>
                  <label>Wear indicator: {{ tyreDetailsFormGroup.value.hotelTyreWearIndicator }} </label>
                </div>
                <div>
                  <label>Rims type: {{ tyreDetailsFormGroup.value.hotelRims }}</label>
                </div>
                <div>
                  <label>Caps: {{ tyreDetailsFormGroup.value.hotelCaps }}</label>
                </div>
                <div>
                  <label>Storage Point: {{ tyreDetailsFormGroup.value.storagePointLocation }}</label>
                </div>
              </mat-card>
            </div>
          </div>
        </div>

        <mat-card-actions>
          <div>
            <button mat-raised-button (click)="print()" type="button">PRINT</button>
            <div *ngIf="visit.isActive">
                <button mat-raised-button (click)="toggleActive()" type="button">DEACTIVATE</button>
            </div>
            <div *ngIf="!visit.isActive">
                <button mat-raised-button (click)="toggleActive()" type="button">ACTIVATE</button>
            </div>
            <button mat-raised-button (click)="sendEmail()" type="button">EMAIL</button>
          </div>
        </mat-card-actions>

        <div>
          <button mat-button matStepperPrevious>BACK</button>
          <button mat-raised-button (click)="cancel()" type="button">CANCEL</button>
          <button mat-raised-button color="primary" (click)="save()" type="submit">SAVE</button>
        </div>
      </form>
    </mat-card>
  </mat-step>

</mat-horizontal-stepper>