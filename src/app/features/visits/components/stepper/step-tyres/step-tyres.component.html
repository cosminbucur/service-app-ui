<mat-card>
    
    <mat-card-title>Tyres info</mat-card-title>

    <form [formGroup]="form" novalidate autocomplete="off">

        <div>
            <button mat-mini-fab color="primary" matTooltip="Add tire">
                <mat-icon>add</mat-icon>
            </button>
        </div>

        <!-- storage point -->
        <mat-form-field>
            <mat-label>Storage point</mat-label>
            <input matInput formControlName="storagePoint" placeholder="Ex. R1E1E2" required>
        </mat-form-field>    

        <!-- on car -->
        <div class="tyre-container">
            <h2>On car</h2>

            <div cdkDropList #onCarList="cdkDropList" [cdkDropListData]="onCarData"
                [cdkDropListConnectedTo]="[inStorageList]" class="tyre-list" (cdkDropListDropped)="drop($event)">
                <mat-card *ngFor="let item of onCarData" cdkDrag>
                    <mat-card-header>
                        <mat-card-title>{{ item.size }}</mat-card-title>
                        <mat-card-subtitle>{{ item.brand }}</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <p>{{ item.season }}</p>
                    </mat-card-content>
                    <mat-card-actions>
                        <button mat-icon-button matTooltip="Clone tire">
                            <mat-icon>file_copy</mat-icon>
                        </button>
                        <button mat-icon-button matTooltip="Delete tire">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </mat-card-actions>
                </mat-card>
            </div>
        </div>

        <!-- in storage -->
        <div class="tyre-container">
            <h2>In storage</h2>

            <div cdkDropList #inStorageList="cdkDropList" [cdkDropListData]="inStorageData"
                [cdkDropListConnectedTo]="[onCarList]" class="tyre-list" (cdkDropListDropped)="drop($event)">
                <mat-card *ngFor="let item of inStorageData" cdkDrag>
                    <mat-card-header>
                        <mat-card-title>{{ item.size }}</mat-card-title>
                        <mat-card-subtitle>{{ item.brand }}</mat-card-subtitle>
                    </mat-card-header>
                    <mat-card-content>
                        <p>{{ item.season }}</p>
                    </mat-card-content>
                    <mat-card-actions>
                        <button mat-icon-button matTooltip="Clone tire">
                            <mat-icon>file_copy</mat-icon>
                        </button>
                        <button mat-icon-button matTooltip="Delete tire">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </mat-card-actions>
                </mat-card>
            </div>
        </div>

    </form>

    <mat-card-actions>
        <button mat-button matStepperPrevious>BACK</button>
        <button mat-raised-button color="primary" matStepperNext>NEXT</button>
    </mat-card-actions>

    <!-- TODO remove this in production -->
    <pre>{{ form.value | json }}</pre>
    <pre>{{ onCarData | json }}</pre>
    <pre>{{ inStorageData | json }}</pre>

</mat-card>
